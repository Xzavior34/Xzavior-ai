{"ast":null,"code":"import _taggedTemplateLiteral from\"/data/data/com.termux/files/home/Xzavior-ai/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7;import React,{useState,useEffect,useRef}from\"react\";import ScrollToBottom from\"react-scroll-to-bottom\";import styled from\"styled-components\";// ----- Styled Components -----\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background-color: #0a2342; // dark blue\\n  min-height: 100vh;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding: 20px;\\n  color: #fff;\\n\"])));const ChatBox=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  max-width: 600px;\\n  height: 80vh;\\n  display: flex;\\n  flex-direction: column;\\n  border-radius: 12px;\\n  overflow: hidden;\\n  background-color: #0f3057;\\n  box-shadow: 0 0 20px rgba(0,0,0,0.3);\\n\"])));const MessagesContainer=styled(ScrollToBottom)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  padding: 15px;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n  overflow-y: auto;\\n\"])));const Message=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  align-self: \",\";\\n  background-color: \",\";\\n  color: #000;\\n  padding: 10px 15px;\\n  border-radius: 20px;\\n  max-width: 75%;\\n  word-wrap: break-word;\\n\"])),props=>props.user?\"flex-end\":\"flex-start\",props=>props.user?\"#3da9fc\":\"#90e0ef\");const InputContainer=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  display: flex;\\n  padding: 10px;\\n  background-color: #0a2342;\\n  gap: 5px;\\n\"])));const TextInput=styled.input(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  padding: 10px;\\n  border-radius: 12px;\\n  border: none;\\n  outline: none;\\n  font-size: 16px;\\n\"])));const Button=styled.button(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  padding: 10px 15px;\\n  border: none;\\n  border-radius: 12px;\\n  background-color: #3da9fc;\\n  color: #fff;\\n  font-weight: bold;\\n  cursor: pointer;\\n\"])));// ----- Backend URL -----\nconst API_URL=\"https://xzavior-ai.onrender.com\";// ----- Main App -----\nfunction App(){const[messages,setMessages]=useState([]);const[input,setInput]=useState(\"\");const ws=useRef(null);// Load chat history from localStorage\nuseEffect(()=>{const saved=JSON.parse(localStorage.getItem(\"chatHistory\"))||[];setMessages(saved);},[]);// Save chat history whenever messages change\nuseEffect(()=>{localStorage.setItem(\"chatHistory\",JSON.stringify(messages));},[messages]);// Initialize WebSocket\nuseEffect(()=>{ws.current=new WebSocket(\"\".concat(API_URL.replace(/^http/,\"ws\"),\"/ws\"));ws.current.onmessage=event=>{const botMsg={user:false,text:event.data};setMessages(prev=>[...prev,botMsg]);speak(botMsg.text);};ws.current.onopen=()=>console.log(\"WebSocket connected\");ws.current.onclose=()=>console.log(\"WebSocket disconnected\");return()=>ws.current.close();},[]);// Send message to WebSocket\nconst sendMessage=()=>{if(!input.trim())return;ws.current.send(input);setMessages(prev=>[...prev,{user:true,text:input}]);setInput(\"\");};const handleKeyPress=e=>{if(e.key===\"Enter\")sendMessage();};// Voice input\nconst voiceInput=()=>{const recognition=new window.webkitSpeechRecognition();recognition.onresult=e=>setInput(e.results[0][0].transcript);recognition.start();};// Text-to-speech\nconst speak=text=>{const utter=new SpeechSynthesisUtterance(text);window.speechSynthesis.speak(utter);};// File upload\nconst handleFileUpload=async file=>{const form=new FormData();form.append(\"file\",file);const res=await fetch(\"\".concat(API_URL,\"/upload\"),{method:\"POST\",body:form});const data=await res.json();setMessages(prev=>[...prev,{user:false,text:\"File \\\"\".concat(data.filename,\"\\\" processed: \").concat(data.analysis)}]);};return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(ChatBox,{children:[/*#__PURE__*/_jsx(MessagesContainer,{children:messages.map((msg,i)=>/*#__PURE__*/_jsx(Message,{user:msg.user,children:msg.text},i))}),/*#__PURE__*/_jsxs(InputContainer,{children:[/*#__PURE__*/_jsx(TextInput,{type:\"text\",value:input,onChange:e=>setInput(e.target.value),onKeyPress:handleKeyPress,placeholder:\"Type a message...\"}),/*#__PURE__*/_jsx(Button,{onClick:sendMessage,children:\"Send\"}),/*#__PURE__*/_jsx(Button,{onClick:voiceInput,children:\"\\uD83C\\uDFA4\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>handleFileUpload(e.target.files[0]),style:{display:\"inline-block\",borderRadius:\"12px\",padding:\"8px\"}})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","ScrollToBottom","styled","jsx","_jsx","jsxs","_jsxs","Container","div","_templateObject","_taggedTemplateLiteral","ChatBox","_templateObject2","MessagesContainer","_templateObject3","Message","_templateObject4","props","user","InputContainer","_templateObject5","TextInput","input","_templateObject6","Button","button","_templateObject7","API_URL","App","messages","setMessages","setInput","ws","saved","JSON","parse","localStorage","getItem","setItem","stringify","current","WebSocket","concat","replace","onmessage","event","botMsg","text","data","prev","speak","onopen","console","log","onclose","close","sendMessage","trim","send","handleKeyPress","e","key","voiceInput","recognition","window","webkitSpeechRecognition","onresult","results","transcript","start","utter","SpeechSynthesisUtterance","speechSynthesis","handleFileUpload","file","form","FormData","append","res","fetch","method","body","json","filename","analysis","children","map","msg","i","type","value","onChange","target","onKeyPress","placeholder","onClick","files","style","display","borderRadius","padding"],"sources":["/data/data/com.termux/files/home/Xzavior-ai/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport ScrollToBottom from \"react-scroll-to-bottom\";\nimport styled from \"styled-components\";\n\n// ----- Styled Components -----\nconst Container = styled.div`\n  background-color: #0a2342; // dark blue\n  min-height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 20px;\n  color: #fff;\n`;\n\nconst ChatBox = styled.div`\n  width: 100%;\n  max-width: 600px;\n  height: 80vh;\n  display: flex;\n  flex-direction: column;\n  border-radius: 12px;\n  overflow: hidden;\n  background-color: #0f3057;\n  box-shadow: 0 0 20px rgba(0,0,0,0.3);\n`;\n\nconst MessagesContainer = styled(ScrollToBottom)`\n  flex: 1;\n  padding: 15px;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  overflow-y: auto;\n`;\n\nconst Message = styled.div`\n  align-self: ${props => (props.user ? \"flex-end\" : \"flex-start\")};\n  background-color: ${props => (props.user ? \"#3da9fc\" : \"#90e0ef\")};\n  color: #000;\n  padding: 10px 15px;\n  border-radius: 20px;\n  max-width: 75%;\n  word-wrap: break-word;\n`;\n\nconst InputContainer = styled.div`\n  display: flex;\n  padding: 10px;\n  background-color: #0a2342;\n  gap: 5px;\n`;\n\nconst TextInput = styled.input`\n  flex: 1;\n  padding: 10px;\n  border-radius: 12px;\n  border: none;\n  outline: none;\n  font-size: 16px;\n`;\n\nconst Button = styled.button`\n  padding: 10px 15px;\n  border: none;\n  border-radius: 12px;\n  background-color: #3da9fc;\n  color: #fff;\n  font-weight: bold;\n  cursor: pointer;\n`;\n\n// ----- Backend URL -----\nconst API_URL = \"https://xzavior-ai.onrender.com\";\n\n// ----- Main App -----\nfunction App() {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const ws = useRef(null);\n\n  // Load chat history from localStorage\n  useEffect(() => {\n    const saved = JSON.parse(localStorage.getItem(\"chatHistory\")) || [];\n    setMessages(saved);\n  }, []);\n\n  // Save chat history whenever messages change\n  useEffect(() => {\n    localStorage.setItem(\"chatHistory\", JSON.stringify(messages));\n  }, [messages]);\n\n  // Initialize WebSocket\n  useEffect(() => {\n    ws.current = new WebSocket(`${API_URL.replace(/^http/, \"ws\")}/ws`);\n\n    ws.current.onmessage = (event) => {\n      const botMsg = { user: false, text: event.data };\n      setMessages(prev => [...prev, botMsg]);\n      speak(botMsg.text);\n    };\n\n    ws.current.onopen = () => console.log(\"WebSocket connected\");\n    ws.current.onclose = () => console.log(\"WebSocket disconnected\");\n\n    return () => ws.current.close();\n  }, []);\n\n  // Send message to WebSocket\n  const sendMessage = () => {\n    if (!input.trim()) return;\n    ws.current.send(input);\n    setMessages(prev => [...prev, { user: true, text: input }]);\n    setInput(\"\");\n  };\n\n  const handleKeyPress = (e) => { if (e.key === \"Enter\") sendMessage(); };\n\n  // Voice input\n  const voiceInput = () => {\n    const recognition = new window.webkitSpeechRecognition();\n    recognition.onresult = (e) => setInput(e.results[0][0].transcript);\n    recognition.start();\n  };\n\n  // Text-to-speech\n  const speak = (text) => {\n    const utter = new SpeechSynthesisUtterance(text);\n    window.speechSynthesis.speak(utter);\n  };\n\n  // File upload\n  const handleFileUpload = async (file) => {\n    const form = new FormData();\n    form.append(\"file\", file);\n    const res = await fetch(`${API_URL}/upload`, {\n      method: \"POST\",\n      body: form\n    });\n    const data = await res.json();\n    setMessages(prev => [...prev, { user: false, text: `File \"${data.filename}\" processed: ${data.analysis}` }]);\n  };\n\n  return (\n    <Container>\n      <ChatBox>\n        <MessagesContainer>\n          {messages.map((msg, i) => (\n            <Message key={i} user={msg.user}>{msg.text}</Message>\n          ))}\n        </MessagesContainer>\n        <InputContainer>\n          <TextInput\n            type=\"text\"\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyPress={handleKeyPress}\n            placeholder=\"Type a message...\"\n          />\n          <Button onClick={sendMessage}>Send</Button>\n          <Button onClick={voiceInput}>ðŸŽ¤</Button>\n          <input\n            type=\"file\"\n            onChange={(e) => handleFileUpload(e.target.files[0])}\n            style={{ display: \"inline-block\", borderRadius: \"12px\", padding: \"8px\" }}\n          />\n        </InputContainer>\n      </ChatBox>\n    </Container>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}